function transformAnimation(t,e){var n=t.getBoundingClientRect(),i=(n.top+window.pageYOffset-window.innerHeight)/page.height*page.scrollRatio,a=(n.bottom+window.pageYOffset)/page.height*page.scrollRatio,o=a-i;e.start=i,e.end=a,e.duration=o}function generateAnimations(t,e){var n=t.getAttribute("data-panel-twin");n&&(t=$(n));var i=e;e.getAttribute("data-animation-target")&&(i=$(e.getAttribute("data-animation-target")));for(var a=e.getAttribute("data-animation")?e.getAttribute("data-animation").split(/,+(?![^\{]*\})/g):"",o=0;o<a.length;o++){var s=a[o].replace("{","").replace("}",""),r=new Animation(t,e,i,0,1,1,s,e.getAttribute("data-animation-easing")||"ease",e.getAttribute("data-animation-round")||!1);transformAnimation(t,r),r.render(0,"init"),animations.push(r)}debug||(e.removeAttribute("data-animation"),e.removeAttribute("data-animation-easing"),e.removeAttribute("data-animation-round"),e.removeAttribute("data-animation-target"),e.className=e.className.replace("animated",""))}function initAnimations(){page.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight),debug&&console.log("Page Height:",page.height),page.scrollRatio=page.height/(page.height-window.innerHeight),debug&&console.log("Scroll Ratio:",page.scrollRatio),page.currentY=window.pageYOffset/page.height*page.scrollRatio,$(".panel").forEach(function(t){$(".animated",t).forEach(function(e){generateAnimations(t,e)})}),animations.forEach(function(t){t.render(page.currentY,"update")})}function updateAnimations(){page.currentY=window.pageYOffset/page.height*page.scrollRatio;for(var t=0;t<animations.length;t++)animations[t].render(page.currentY,"update");page.resizeClock=(page.resizeClock+1)%10,0==page.resizeCloc&&resizeAnimations()}function scrollAnimations(){}function resizeAnimations(){page.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight),page.scrollRatio=page.height/(page.height-window.innerHeight),animations.forEach(function(t){transformAnimation(t.panel,t)})}function initScrollSnap(){resizeScrollSnap(),lDate=Date.now(),$(".snap-point").forEach(function(t){snapPoints.push(new SnapPoint(t))})}function updateScrollSnap(){if(deltaTime=(Date.now()-lDate)/1e3,null==target){if(!scrolling)for(var t=0;t<snapPoints.length;t++){var e=snapPoints[t];Math.abs(e.snapTarget-window.pageYOffset)<e.snapMargin&&(target=e)}}else if(1==animationState&&(scrolling?target=null:(setTimeout(function(){scrolling?(animationState=1,target=null):(animationState=3,targetDist=target.snapTarget-window.pageYOffset)},snapDelay),animationState=2)),3==animationState){animationProgress+=3*deltaTime;var n=animationProgress;n=Math.pow(n-1,3)+1,window.scrollTo(0,target.snapTarget-targetDist*(1-n)),animationProgress>=1&&(window.scrollTo(0,target.snapTarget),animationState=4,onSnap())}lDate=Date.now()}function onSnap(){}function resizeScrollSnap(){snapPoints.forEach(function(t){var e=t.el.getBoundingClientRect();switch(t.el.getAttribute("data-snap-target")){case"top":t.snapTarget=window.pageYOffset+e.top;break;case"middle":t.snapTarget=window.pageYOffset+e.top+.5*window.innerHeight;break;case"bottom":t.snapTarget=window.pageYOffset+e.top+window.innerHeight}})}function scrollScrollSnap(){4==animationState&&(animationState=1,animationProgress=0,target=null),scrolling=!0,clearTimeout(scrollTimer),scrollTimer=setTimeout(function(){scrolling=!1},100)}function $(t){var e=document.querySelectorAll(t);return 1==e.length?e.item(0):e}var debug=!0,page={currentY:0,scrollRatio:0,height:0,resizeClock:0},animations=new Array;Array.prototype.clean=function(t){for(var e=0;e<this.length;e++)this[e]==t&&(this.splice(e,1),e--);return this};var Animation=function(t,e,n,i,a,o,s,r,l){if(this.panel=t,this.el=e,this.target=n,this.start=i,this.end=a,this.duration=o,""!=s){var u=s.replace(/ /g,"").replace(/\)/g,") ").replace(/ \//g,"/").replace(/\s+$/,"");this.animationAttribute=u.split("=").shift(),"transform"==this.animationAttribute&&(this.target.style.willChange="transform"),u.indexOf("(")!==-1?this.animationValueType="function":this.animationValueType="value";for(var p=u.split("=").pop().split(/,+(?![^\(]*\))/g),m="",c=0;c<p.length;c++){var f=p[c].split(":");if("value"==this.animationValueType)m+='{"time":"'+f[0]+'","value":"'+f[1]+'"}';else{for(var h="[",d=f[1].split(/ /g).clean(""),g=0;g<d.length;g++){h+='{"functionName":"',h+=d[g].match(/([a-zA-Z0-9])+/g)[0],h+='","values":[';for(var v=d[g].match(/\((.*?)\)/g)[0].replace(/[\(\)]/g,"").split(/,/g).clean(""),w=0;w<v.length;w++)h+='"'+v[w]+'"',w<v.length-1&&(h+=",");h+="]}",g<d.length-1&&(h+=",")}h+="]",m+='{"time":"'+f[0]+'","values":'+h+',"staticValue":"'+f[1]+'"}'}c<p.length-1&&(m+=",")}this.animation=JSON.parse('{"keyframes":['+m+"]}"),this.easing=r,this.round=l}this.animationStatus="during",debug&&console.log(this)};Animation.prototype.animationStart=function(){return this.start+this.animation.keyframes[0].time*this.duration},Animation.prototype.animationEnd=function(){return this.start+this.animation.keyframes[this.animation.keyframes.length-1].time*this.duration},Animation.prototype.getUnits=function(t){for(var e=["px","em","%","deg","turn","vw","vh","vmin","vmax"],n=0;n<e.length;n++)if(t.indexOf(e[n])!==-1)return e[n];return""},Animation.prototype.render=function(t,e){var n="during";if(t>this.start+this.animation.keyframes[this.animation.keyframes.length-1].time*this.duration?n="after":t<this.start+this.animation.keyframes[0].time*this.duration&&(n="before"),"init"==e&&""==this.target.style[this.animationAttribute]||"update"==e)if(this.animationStatus==n||"before"!=n&&"after"!=n){n!=this.animationStatus;for(var i=(t-this.start)/this.duration,a=this.animation.keyframes[0],o=this.animation.keyframes[this.animation.keyframes.length-1],s=0;s<this.animation.keyframes.length;s++){var r=this.animation.keyframes[s];if(r.time==i)return void("value"==this.animationValueType?this.el.style[this.animationAttribute]=r.value:this.el.style[this.animationAttribute]=r.staticValue);r.time<i?parseFloat(r.time)>parseFloat(a.time)&&(a=r):parseFloat(r.time)<parseFloat(o.time)&&(o=r)}var l,u=(i-a.time)/(o.time-a.time);switch(this.easing){case"easeIn":u=Math.pow(u,2);break;case"easeOut":u=-(Math.pow(u-1,2)-1);break;case"ease":u=(u/=.5)<1?.5*Math.pow(u,2):-.5*((u-=2)*u-2)}var l="";if("function"==this.animationValueType)for(var p=0;p<a.values.length;p++){var m=a.values[p],c=o.values[p];l+=m.functionName+"(";for(var f=0;f<m.values.length;f++){var h=parseFloat(m.values[f])*(1-u)+parseFloat(c.values[f])*u;this.round&&(h=Math.round(h)),l+=h+this.getUnits(m.values[f]),f<m.values.length-1&&(l+=",")}l+=")",p<a.values.length-1&&(l+=" ")}else l=parseFloat(a.value)*(1-u)+parseFloat(o.value)*u+this.getUnits(a.value);this.target.style[this.animationAttribute]=l}else"after"==n?"value"==this.animationValueType?this.target.style[this.animationAttribute]=this.animation.keyframes[this.animation.keyframes.length-1].value:this.target.style[this.animationAttribute]=this.animation.keyframes[this.animation.keyframes.length-1].staticValue:"value"==this.animationValueType?this.target.style[this.animationAttribute]=this.animation.keyframes[0].value:this.target.style[this.animationAttribute]=this.animation.keyframes[0].staticValue;this.animationStatus=n},window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),function(){function t(){initAnimations(),initScrollSnap(),requestAnimationFrame(e)}function e(){updateAnimations(),updateScrollSnap(),requestAnimationFrame(e)}function n(){resizeAnimations(),resizeScrollSnap()}function i(){scrollAnimations(),scrollScrollSnap()}window.addEventListener("load",t,!1),window.addEventListener("resize",n,!1),window.addEventListener("scroll",i,!1)}(),!function(t,e,n){function i(t,e){return typeof t===e}function a(){var t,e,n,a,o,s,r;for(var l in y)if(y.hasOwnProperty(l)){if(t=[],e=y[l],e.name&&(t.push(e.name.toLowerCase()),e.options&&e.options.aliases&&e.options.aliases.length))for(n=0;n<e.options.aliases.length;n++)t.push(e.options.aliases[n].toLowerCase());for(a=i(e.fn,"function")?e.fn():e.fn,o=0;o<t.length;o++)s=t[o],r=s.split("."),1===r.length?A[r[0]]=a:(!A[r[0]]||A[r[0]]instanceof Boolean||(A[r[0]]=new Boolean(A[r[0]])),A[r[0]][r[1]]=a),w.push((a?"":"no-")+r.join("-"))}}function o(t){var e=S.className,n=A._config.classPrefix||"";if(T&&(e=e.baseVal),A._config.enableJSClass){var i=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");e=e.replace(i,"$1"+n+"js$2")}A._config.enableClasses&&(e+=" "+n+t.join(" "+n),T?S.className.baseVal=e:S.className=e)}function s(){return"function"!=typeof e.createElement?e.createElement(arguments[0]):T?e.createElementNS.call(e,"http://www.w3.org/2000/svg",arguments[0]):e.createElement.apply(e,arguments)}function r(){var t=e.body;return t||(t=s(T?"svg":"body"),t.fake=!0),t}function l(t,n,i,a){var o,l,u,p,m="modernizr",c=s("div"),f=r();if(parseInt(i,10))for(;i--;)u=s("div"),u.id=a?a[i]:m+(i+1),c.appendChild(u);return o=s("style"),o.type="text/css",o.id="s"+m,(f.fake?f:c).appendChild(o),f.appendChild(c),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(e.createTextNode(t)),c.id=m,f.fake&&(f.style.background="",f.style.overflow="hidden",p=S.style.overflow,S.style.overflow="hidden",S.appendChild(f)),l=n(c,t),f.fake?(f.parentNode.removeChild(f),S.style.overflow=p,S.offsetHeight):c.parentNode.removeChild(c),!!l}function u(t,e){return!!~(""+t).indexOf(e)}function p(t){return t.replace(/([a-z])-([a-z])/g,function(t,e,n){return e+n.toUpperCase()}).replace(/^-/,"")}function m(t,e){return function(){return t.apply(e,arguments)}}function c(t,e,n){var a;for(var o in t)if(t[o]in e)return n===!1?t[o]:(a=e[t[o]],i(a,"function")?m(a,n||e):a);return!1}function f(t){return t.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()}).replace(/^ms-/,"-ms-")}function h(e,i){var a=e.length;if("CSS"in t&&"supports"in t.CSS){for(;a--;)if(t.CSS.supports(f(e[a]),i))return!0;return!1}if("CSSSupportsRule"in t){for(var o=[];a--;)o.push("("+f(e[a])+":"+i+")");return o=o.join(" or "),l("@supports ("+o+") { #modernizr { position: absolute; } }",function(t){return"absolute"==getComputedStyle(t,null).position})}return n}function d(t,e,a,o){function r(){m&&(delete O.style,delete O.modElem)}if(o=!i(o,"undefined")&&o,!i(a,"undefined")){var l=h(t,a);if(!i(l,"undefined"))return l}for(var m,c,f,d,g,v=["modernizr","tspan","samp"];!O.style&&v.length;)m=!0,O.modElem=s(v.shift()),O.style=O.modElem.style;for(f=t.length,c=0;f>c;c++)if(d=t[c],g=O.style[d],u(d,"-")&&(d=p(d)),O.style[d]!==n){if(o||i(a,"undefined"))return r(),"pfx"!=e||d;try{O.style[d]=a}catch(t){}if(O.style[d]!=g)return r(),"pfx"!=e||d}return r(),!1}function g(t,e,n,a,o){var s=t.charAt(0).toUpperCase()+t.slice(1),r=(t+" "+N.join(s+" ")+s).split(" ");return i(e,"string")||i(e,"undefined")?d(r,e,a,o):(r=(t+" "+P.join(s+" ")+s).split(" "),c(r,e,n))}function v(t,e,i){return g(t,n,n,e,i)}var w=[],y=[],b={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(t,e){var n=this;setTimeout(function(){e(n[t])},0)},addTest:function(t,e,n){y.push({name:t,fn:e,options:n})},addAsyncTest:function(t){y.push({name:null,fn:t})}},A=function(){};A.prototype=b,A=new A;var S=e.documentElement,T="svg"===S.nodeName.toLowerCase(),C="CSS"in t&&"supports"in t.CSS,k="supportsCSS"in t;A.addTest("supports",C||k),A.addTest("preserve3d",function(){var t=s("a"),e=s("a");t.style.cssText="display: block; transform-style: preserve-3d; transform-origin: right; transform: rotateY(40deg);",e.style.cssText="display: block; width: 9px; height: 1px; background: #000; transform-origin: right; transform: rotateY(40deg);",t.appendChild(e),S.appendChild(t);var n=e.getBoundingClientRect();return S.removeChild(t),n.width&&n.width<4});var E=b.testStyles=l;E("#modernizr { height: 50vh; }",function(e){var n=parseInt(t.innerHeight/2,10),i=parseInt((t.getComputedStyle?getComputedStyle(e,null):e.currentStyle).height,10);A.addTest("cssvhunit",i==n)});var x="Moz O ms Webkit",N=b._config.usePrefixes?x.split(" "):[];b._cssomPrefixes=N;var P=b._config.usePrefixes?x.toLowerCase().split(" "):[];b._domPrefixes=P;var z={elem:s("modernizr")};A._q.push(function(){delete z.elem});var O={style:z.elem.style};A._q.unshift(function(){delete O.style}),b.testAllProps=g,b.testAllProps=v,A.addTest("csstransforms",function(){return-1===navigator.userAgent.indexOf("Android 2.")&&v("transform","scale(1)",!0)}),A.addTest("csstransforms3d",function(){var t=!!v("perspective","1px",!0),e=A._config.usePrefixes;if(t&&(!e||"webkitPerspective"in S.style)){var n,i="#modernizr{width:0;height:0}";A.supports?n="@supports (perspective: 1px)":(n="@media (transform-3d)",e&&(n+=",(-webkit-transform-3d)")),n+="{#modernizr{width:7px;height:18px;margin:0;padding:0;border:0}}",E(i+n,function(e){t=7===e.offsetWidth&&18===e.offsetHeight})}return t}),a(),o(w),delete b.addTest,delete b.addAsyncTest;for(var H=0;H<A._q.length;H++)A._q[H]();t.Modernizr=A}(window,document);var snapPoints=new Array,target=null,targetDist,animationProgress=0,animationState=1,disableWidth=400,disabled=!1,snapDelay=500,lDate,deltaTime,scrolling=!1,scrollTimer,SnapPoint=function(t){this.el=t,this.snapMargin=parseFloat(this.el.getAttribute("data-snap-margin"));var e=this.el.getBoundingClientRect();switch(this.el.getAttribute("data-snap-target")){case"top":this.snapTarget=window.pageYOffset+e.top;break;case"middle":this.snapTarget=window.pageYOffset+e.top+.5*window.innerHeight;break;case"bottom":this.snapTarget=window.pageYOffset+e.top+window.innerHeight}};Element.prototype.nodeNumber=function(){for(var t=this,e=0;null!=(t=t.previousElementSibling);)e++;return e},Element.prototype.isBefore=function(t){return this.parentNode!=t.parentNode?(console.log("not the same parent"),!1):!(this.nodeNumber()>t.nodeNumber())},Element.prototype.addClass=function(t){if(this.classList)return this.classList.add(t),this;var e=this.className.split(" ");return e.indexOf(classToAdd)===-1&&(this.className=this.className+(e.length>0?" ":"")+classToAdd),this},Element.prototype.removeClass=function(t){if(this.classList)return this.classList.remove(t),this;var e="";return this.className.split(" ").forEach(function(n){n!=t&&(e+=n+" ")}),this.className=e.replace(/[ \/t]+$/,""),this},Element.prototype.hasClass=function(t){return this.classList?this.classList.contains(t):this.className.split(" ").indexOf(t)!=-1},Element.prototype.loop=function(t){t(this)},NodeList.prototype.addEventListener=function(t,e,n){this.loop(function(i){i.addEventListener(t,e,n||!1)})},NodeList.prototype.removeEventListener=function(t,e,n){this.loop(function(i){i.removeEventListener(t,e,n||!1)})},NodeList.prototype.loop=function(t){for(var e=0;e<this.length;e++)t(this.item(e))};