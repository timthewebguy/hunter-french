function initScrollSnap(){resizeScrollSnap(),lDate=Date.now(),$(".snap-point").forEach(function(t){snapPoints.push(new SnapPoint(t))})}function updateScrollSnap(){if(deltaTime=(Date.now()-lDate)/1e3,null==target){if(!scrolling)for(var t=0;t<snapPoints.length;t++){var e=snapPoints[t];Math.abs(e.snapTarget-window.pageYOffset)<e.snapMargin&&(target=e)}}else if(1==animationState&&(scrolling?target=null:(setTimeout(function(){scrolling?(animationState=1,target=null):(animationState=3,targetDist=target.snapTarget-window.pageYOffset)},snapDelay),animationState=2)),3==animationState){animationProgress+=3*deltaTime;var n=animationProgress;n=Math.pow(n-1,3)+1,window.scrollTo(0,target.snapTarget-targetDist*(1-n)),animationProgress>=1&&(window.scrollTo(0,target.snapTarget),animationState=4,onSnap())}lDate=Date.now()}function onSnap(){}function resizeScrollSnap(){snapPoints.forEach(function(t){var e=t.el.getBoundingClientRect();switch(t.el.getAttribute("data-snap-target")){case"top":t.snapTarget=window.pageYOffset+e.top;break;case"middle":t.snapTarget=window.pageYOffset+e.top+.5*window.innerHeight;break;case"bottom":t.snapTarget=window.pageYOffset+e.top+window.innerHeight}})}function scrollScrollSnap(){4==animationState&&(animationState=1,animationProgress=0,target=null),scrolling=!0,clearTimeout(scrollTimer),scrollTimer=setTimeout(function(){scrolling=!1},100)}function $(t,e){var n=e||document,i=n.querySelectorAll(t);return 1==i.length?i.item(0):i}Array.prototype.clean=function(t){for(var e=0;e<this.length;e++)this[e]==t&&(this.splice(e,1),e--);return this};var Animation=function(t,e,n,i,a,s,o,r,l,h){if(this.panel=t,this.el=e,this.target=n,this.start=i,this.end=a,this.duration=s,""!=o){var u=o.replace(/ /g,"").replace(/\)/g,") ").replace(/ \//g,"/").replace(/\s+$/,"");this.animationAttribute=u.split("=").shift(),u.indexOf("(")!==-1?this.animationValueType="function":this.animationValueType="value";for(var d=u.split("=").pop().split(/,+(?![^\(]*\))/g),c="",p=0;p<d.length;p++){var f=d[p].split(":");if("value"==this.animationValueType)c+='{"time":"'+f[0]+'","value":"'+f[1]+'"}';else{for(var m="[",g=f[1].split(/ /g).clean(""),v=0;v<g.length;v++){m+='{"functionName":"',m+=g[v].match(/([a-zA-Z0-9])+/g)[0],m+='","values":[';for(var y=g[v].match(/\((.*?)\)/g)[0].replace(/[\(\)]/g,"").split(/,/g).clean(""),w=0;w<y.length;w++)m+='"'+y[w]+'"',w<y.length-1&&(m+=",");m+="]}",v<g.length-1&&(m+=",")}m+="]",c+='{"time":"'+f[0]+'","values":'+m+',"staticValue":"'+f[1]+'"}'}p<d.length-1&&(c+=",")}this.animation=JSON.parse('{"keyframes":['+c+"]}"),this.easing=r,this.round=l,h&&(this.onBefore=h.onBefore||null,this.onDuring=h.onDuring||null,this.onAfter=h.onAfter||null)}this.animationStatus="during",this.debug&&console.log(this)};Animation.prototype.getUnits=function(t){for(var e=["px","em","%","deg","turn","vw","vh","vmin","vmax"],n=0;n<e.length;n++)if(t.indexOf(e[n])!==-1)return e[n];return""},Animation.prototype.render=function(t,e){var n="during";if(t>=this.start+this.animation.keyframes[this.animation.keyframes.length-1].time*this.duration?n="after":t<=this.start+this.animation.keyframes[0].time*this.duration&&(n="before"),"init"==e&&""==this.target.style[this.animationAttribute]||"update"==e)if(this.animationStatus==n||"before"!=n&&"after"!=n){n!=this.animationStatus&&this.onDuring&&this.onDuring(this);for(var i=(t-this.start)/this.duration,a=this.animation.keyframes[0],s=this.animation.keyframes[this.animation.keyframes.length-1],o=0;o<this.animation.keyframes.length;o++){var r=this.animation.keyframes[o];if(r.time==i)return void("value"==this.animationValueType?this.el.style[this.animationAttribute]=r.value:this.el.style[this.animationAttribute]=r.staticValue);r.time<i?parseFloat(r.time)>parseFloat(a.time)&&(a=r):parseFloat(r.time)<parseFloat(s.time)&&(s=r)}var l,h=(i-a.time)/(s.time-a.time);switch(this.easing){case"easeIn":h=Math.pow(h,2);break;case"easeOut":h=-(Math.pow(h-1,2)-1);break;case"ease":h=(h/=.5)<1?.5*Math.pow(h,2):-.5*((h-=2)*h-2)}var l="";if("function"==this.animationValueType)for(var u=0;u<a.values.length;u++){var d=a.values[u],c=s.values[u];l+=d.functionName+"(";for(var p=0;p<d.values.length;p++){var f=parseFloat(d.values[p])*(1-h)+parseFloat(c.values[p])*h;this.round&&(f=Math.round(f)),l+=f+this.getUnits(d.values[p]),p<d.values.length-1&&(l+=",")}l+=")",u<a.values.length-1&&(l+=" ")}else l=parseFloat(a.value)*(1-h)+parseFloat(s.value)*h+this.getUnits(a.value);this.target.style[this.animationAttribute]=l}else"after"==n?("value"==this.animationValueType?this.target.style[this.animationAttribute]=this.animation.keyframes[this.animation.keyframes.length-1].value:this.target.style[this.animationAttribute]=this.animation.keyframes[this.animation.keyframes.length-1].staticValue,this.onAfter&&this.onAfter(this)):("value"==this.animationValueType?this.target.style[this.animationAttribute]=this.animation.keyframes[0].value:this.target.style[this.animationAttribute]=this.animation.keyframes[0].staticValue,this.onBefore&&this.onBefore(this));this.animationStatus=n};var DataScroll=function(t,e){this.root=t||document.body,e=e||{},this.debug=e.debug||!1,this.ease=e.ease||"ease",this.round=e.round||!1,this.enabled=e.enabled||!0,this.height=this.calcHeight(),this.debug&&console.log("Page Height:",this.height),this.scrollRatio=this.height/(this.height-this.calcContainerHeight()),this.debug&&console.log("Scroll Ratio:",this.scrollRatio),this.currentY=this.scrollY()/this.height*this.scrollRatio,this.animations=new Array;var n=this;$(".panel").loop(function(t){$(".animated",t).loop(function(e){n.addDataAnimation(t,e)})}),this.animations.forEach(function(t){t.render(this.currentY,"update")}),window.addEventListener("resize",this.resize.bind(this),!1),requestAnimationFrame(this.update.bind(this))};DataScroll.prototype.calcHeight=function(){return this.root==document.body?Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight):this.root.scrollHeight},DataScroll.prototype.calcContainerHeight=function(){return this.root==document.body?window.innerHeight:this.root.getBoundingClientRect().height},DataScroll.prototype.scrollY=function(){return this.root==document.body?window.pageYOffset:this.root.scrollTop},DataScroll.prototype.transformAnimation=function(t,e){var n=t.getBoundingClientRect(),i=(n.top+window.pageYOffset-window.innerHeight)/this.height*this.scrollRatio,a=(n.bottom+window.pageYOffset)/this.height*this.scrollRatio,s=a-i;e.start=i,e.end=a,e.duration=s},DataScroll.prototype.addDataAnimation=function(t,e){var n=t.getAttribute("data-panel-twin");n&&(t=$(n));var i=e;if(e.getAttribute("data-animation-target"))switch(e.getAttribute("data-animation-target")){case"next":i=e.nextElementSibling;break;case"prev":i=e.previousElementSibling;break;case"parent":i=e.parentElement;break;default:i=$(e.getAttribute("data-animation-target"))}for(var a=e.getAttribute("data-animation")?e.getAttribute("data-animation").split(/,+(?![^\{]*\})/g):"",s=0;s<a.length;s++){var o=a[s].replace("{","").replace("}",""),r=new Animation(t,e,i,0,1,1,o,e.getAttribute("data-animation-easing")||"ease",e.getAttribute("data-animation-round")||!1);this.transformAnimation(t,r),r.render(0,"init"),this.animations.push(r)}this.debug||(e.removeAttribute("data-animation"),e.removeAttribute("data-animation-easing"),e.removeAttribute("data-animation-round"),e.removeAttribute("data-animation-target"),e.className=e.className.replace("animated",""))},DataScroll.prototype.addAnimation=function(t,e,n,i,a,s){a=a||{};for(var o=i.split(/,+(?![^\{]*\})/g),r=0;r<o.length;r++){var l=o[r].replace("{","").replace("}",""),h=new Animation(t,e,n,a.start||0,a.end||1,a.duration||1,l,a.ease||this.ease,a.round||this.round,s||{});this.transformAnimation(t,h),h.render(0,"init"),this.animations.push(h),h.render(this.currentY,"update")}},DataScroll.prototype.update=function(){if(this.enabled){this.currentY=this.scrollY()/this.height*this.scrollRatio;for(var t=0;t<this.animations.length;t++)this.animations[t].render(this.currentY,"update");requestAnimationFrame(this.update.bind(this))}},DataScroll.prototype.resize=function(){this.height=this.calcHeight(),this.scrollRatio=this.height/(this.height-this.calcContainerHeight());var t=this;this.animations.forEach(function(e){t.transformAnimation(e.panel,e)})},DataScroll.prototype.enable=function(){this.enabled=!0,this.animations.forEach(function(t){t.render(0,"init"),t.render(this.currentY,"update")}),requestAnimationFrame(this.update.bind(this))},DataScroll.prototype.disable=function(){this.enabled=!1,this.animations.forEach(function(t){t.target.style[t.animationAttribute]=""})},window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),function(){function t(){var t=999;n=new DataScroll(document.body);var e=0;$(".tile").loop(function(i){i.style.zIndex=t,t--;for(var a=25,s=e;Math.abs(e-s)<=1;)s=Math.random()*Math.PI*2;var o=Math.cos(s)*a+(10*Math.random()-5)-.5*a,r=Math.sin(s)*a+(10*Math.random()-5)-.5*a;$(".tile__inner",i).style.transform="translate("+o+"vmin, "+r+"vmin)";var l=document.createElement("div"),h=document.createElement("div");l.className="tile__trigger",h.className="tile__trigger-inner",l.appendChild(h),$(".tiles__triggers").appendChild(l),n.addAnimation(l,h,i,["{transform=0:translateZ(-100px),1:translateZ(200px)}","{opacity=0:0,0.2:1,0.8:1,1:0}"].join(","),{ease:"linear"},{onBefore:function(t){t.target.style.pointerEvents="none"},onDuring:function(t){t.target.style.pointerEvents="all"},onAfter:function(t){t.target.style.pointerEvents="none"}})}),$(".tile__img").addEventListener("mousemove",function(t){this.getBoundingClientRect()}),n.resize()}function e(){window.innerWidth<=768&&1==n.enabled&&n.disable(),window.innerWidth>768&&0==n.enabled&&n.enable()}var n;window.addEventListener("load",t,!1),window.addEventListener("resize",e,!1)}(),!function(t,e,n){function i(t,e){return typeof t===e}function a(){var t,e,n,a,s,o,r;for(var l in w)if(w.hasOwnProperty(l)){if(t=[],e=w[l],e.name&&(t.push(e.name.toLowerCase()),e.options&&e.options.aliases&&e.options.aliases.length))for(n=0;n<e.options.aliases.length;n++)t.push(e.options.aliases[n].toLowerCase());for(a=i(e.fn,"function")?e.fn():e.fn,s=0;s<t.length;s++)o=t[s],r=o.split("."),1===r.length?S[r[0]]=a:(!S[r[0]]||S[r[0]]instanceof Boolean||(S[r[0]]=new Boolean(S[r[0]])),S[r[0]][r[1]]=a),y.push((a?"":"no-")+r.join("-"))}}function s(t){var e=A.className,n=S._config.classPrefix||"";if(T&&(e=e.baseVal),S._config.enableJSClass){var i=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");e=e.replace(i,"$1"+n+"js$2")}S._config.enableClasses&&(e+=" "+n+t.join(" "+n),T?A.className.baseVal=e:A.className=e)}function o(){return"function"!=typeof e.createElement?e.createElement(arguments[0]):T?e.createElementNS.call(e,"http://www.w3.org/2000/svg",arguments[0]):e.createElement.apply(e,arguments)}function r(){var t=e.body;return t||(t=o(T?"svg":"body"),t.fake=!0),t}function l(t,n,i,a){var s,l,h,u,d="modernizr",c=o("div"),p=r();if(parseInt(i,10))for(;i--;)h=o("div"),h.id=a?a[i]:d+(i+1),c.appendChild(h);return s=o("style"),s.type="text/css",s.id="s"+d,(p.fake?p:c).appendChild(s),p.appendChild(c),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(e.createTextNode(t)),c.id=d,p.fake&&(p.style.background="",p.style.overflow="hidden",u=A.style.overflow,A.style.overflow="hidden",A.appendChild(p)),l=n(c,t),p.fake?(p.parentNode.removeChild(p),A.style.overflow=u,A.offsetHeight):c.parentNode.removeChild(c),!!l}function h(t,e){return!!~(""+t).indexOf(e)}function u(t){return t.replace(/([a-z])-([a-z])/g,function(t,e,n){return e+n.toUpperCase()}).replace(/^-/,"")}function d(t,e){return function(){return t.apply(e,arguments)}}function c(t,e,n){var a;for(var s in t)if(t[s]in e)return n===!1?t[s]:(a=e[t[s]],i(a,"function")?d(a,n||e):a);return!1}function p(t){return t.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()}).replace(/^ms-/,"-ms-")}function f(e,i){var a=e.length;if("CSS"in t&&"supports"in t.CSS){for(;a--;)if(t.CSS.supports(p(e[a]),i))return!0;return!1}if("CSSSupportsRule"in t){for(var s=[];a--;)s.push("("+p(e[a])+":"+i+")");return s=s.join(" or "),l("@supports ("+s+") { #modernizr { position: absolute; } }",function(t){return"absolute"==getComputedStyle(t,null).position})}return n}function m(t,e,a,s){function r(){d&&(delete _.style,delete _.modElem)}if(s=!i(s,"undefined")&&s,!i(a,"undefined")){var l=f(t,a);if(!i(l,"undefined"))return l}for(var d,c,p,m,g,v=["modernizr","tspan","samp"];!_.style&&v.length;)d=!0,_.modElem=o(v.shift()),_.style=_.modElem.style;for(p=t.length,c=0;p>c;c++)if(m=t[c],g=_.style[m],h(m,"-")&&(m=u(m)),_.style[m]!==n){if(s||i(a,"undefined"))return r(),"pfx"!=e||m;try{_.style[m]=a}catch(t){}if(_.style[m]!=g)return r(),"pfx"!=e||m}return r(),!1}function g(t,e,n,a,s){var o=t.charAt(0).toUpperCase()+t.slice(1),r=(t+" "+D.join(o+" ")+o).split(" ");return i(e,"string")||i(e,"undefined")?m(r,e,a,s):(r=(t+" "+N.join(o+" ")+o).split(" "),c(r,e,n))}function v(t,e,i){return g(t,n,n,e,i)}var y=[],w=[],b={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(t,e){var n=this;setTimeout(function(){e(n[t])},0)},addTest:function(t,e,n){w.push({name:t,fn:e,options:n})},addAsyncTest:function(t){w.push({name:null,fn:t})}},S=function(){};S.prototype=b,S=new S;var A=e.documentElement,T="svg"===A.nodeName.toLowerCase(),C="CSS"in t&&"supports"in t.CSS,E="supportsCSS"in t;S.addTest("supports",C||E),S.addTest("preserve3d",function(){var t=o("a"),e=o("a");t.style.cssText="display: block; transform-style: preserve-3d; transform-origin: right; transform: rotateY(40deg);",e.style.cssText="display: block; width: 9px; height: 1px; background: #000; transform-origin: right; transform: rotateY(40deg);",t.appendChild(e),A.appendChild(t);var n=e.getBoundingClientRect();return A.removeChild(t),n.width&&n.width<4});var k=b.testStyles=l;k("#modernizr { height: 50vh; }",function(e){var n=parseInt(t.innerHeight/2,10),i=parseInt((t.getComputedStyle?getComputedStyle(e,null):e.currentStyle).height,10);S.addTest("cssvhunit",i==n)});var x="Moz O ms Webkit",D=b._config.usePrefixes?x.split(" "):[];b._cssomPrefixes=D;var N=b._config.usePrefixes?x.toLowerCase().split(" "):[];b._domPrefixes=N;var P={elem:o("modernizr")};S._q.push(function(){delete P.elem});var _={style:P.elem.style};S._q.unshift(function(){delete _.style}),b.testAllProps=g,b.testAllProps=v,S.addTest("csstransforms",function(){return-1===navigator.userAgent.indexOf("Android 2.")&&v("transform","scale(1)",!0)}),S.addTest("csstransforms3d",function(){var t=!!v("perspective","1px",!0),e=S._config.usePrefixes;if(t&&(!e||"webkitPerspective"in A.style)){var n,i="#modernizr{width:0;height:0}";S.supports?n="@supports (perspective: 1px)":(n="@media (transform-3d)",e&&(n+=",(-webkit-transform-3d)")),n+="{#modernizr{width:7px;height:18px;margin:0;padding:0;border:0}}",k(i+n,function(e){t=7===e.offsetWidth&&18===e.offsetHeight})}return t}),a(),s(y),delete b.addTest,delete b.addAsyncTest;for(var H=0;H<S._q.length;H++)S._q[H]();t.Modernizr=S}(window,document);var snapPoints=new Array,target=null,targetDist,animationProgress=0,animationState=1,disableWidth=400,disabled=!1,snapDelay=500,lDate,deltaTime,scrolling=!1,scrollTimer,SnapPoint=function(t){this.el=t,this.snapMargin=parseFloat(this.el.getAttribute("data-snap-margin"));var e=this.el.getBoundingClientRect();switch(this.el.getAttribute("data-snap-target")){case"top":this.snapTarget=window.pageYOffset+e.top;break;case"middle":this.snapTarget=window.pageYOffset+e.top+.5*window.innerHeight;break;case"bottom":this.snapTarget=window.pageYOffset+e.top+window.innerHeight}};Element.prototype.nodeNumber=function(){for(var t=this,e=0;null!=(t=t.previousElementSibling);)e++;return e},Element.prototype.isBefore=function(t){return this.parentNode!=t.parentNode?(console.log("not the same parent"),!1):!(this.nodeNumber()>t.nodeNumber())},Element.prototype.addClass=function(t){if(this.classList)return this.classList.add(t),this;var e=this.className.split(" ");return e.indexOf(classToAdd)===-1&&(this.className=this.className+(e.length>0?" ":"")+classToAdd),this},Element.prototype.removeClass=function(t){if(this.classList)return this.classList.remove(t),this;var e="";return this.className.split(" ").forEach(function(n){n!=t&&(e+=n+" ")}),this.className=e.replace(/[ \/t]+$/,""),this},Element.prototype.hasClass=function(t){return this.classList?this.classList.contains(t):this.className.split(" ").indexOf(t)!=-1},Element.prototype.loop=function(t){t(this)},NodeList.prototype.addEventListener=function(t,e,n){this.loop(function(i){i.addEventListener(t,e,n||!1)})},NodeList.prototype.removeEventListener=function(t,e,n){this.loop(function(i){i.removeEventListener(t,e,n||!1)})},NodeList.prototype.loop=function(t){for(var e=0;e<this.length;e++)t(this.item(e))};